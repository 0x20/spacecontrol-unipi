// JSONPATH($.users[*].badge)
// https://github.com/openhab/openhab/wiki/Hardware-FAQ
//  --> rpi optimalization

rule "Door Bell Rule"
when
 	Item doorBell received update
then
	var String doorBellString = doorBell.state.toString.trim
//    var lines = doorBellString.split("\\r?\\n");
    
//    if (lines.size > 0) {
//    	doorBellString = lines.get(0)
//    }

	if (doorBellString == "OPEN") {
		if (space.state == ON) {		
			sendCommand(doorBell, "YES\n")
		} else if (space.state == OFF) {
			sendCommand(doorBell, "NO\n")
		} else {
			sendCommand(doorBell, "NO\n")
			space.send(OFF)
		}
	} // provide options for the two other push buttons
end
