// JSONPATH($.users[*].badge)
// $.users[?(@.member=='1')].badge
// https://github.com/openhab/openhab/wiki/Hardware-FAQ
//  --> rpi optimalization

rule "Doorbell Rule"
when
 	Item doorbell received update
then
	var String doorBellString = doorbell.state.toString.trim
//    var lines = doorBellString.split("\\r?\\n");
    
//    if (lines.size > 0) {
//    	doorBellString = lines.get(0)
//    }

	if (doorBellString == "OPEN") {
		if (space.state == ON) {		
			sendCommand(doorbell, "YES\n")
		} else if (space.state == OFF) {
			sendCommand(doorbell, "NO\n")
		} else {
			sendCommand(doorbell, "NO\n")
			space.send(OFF)
		}
	} // provide options for the two other push buttons
end
